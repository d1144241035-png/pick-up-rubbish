<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SDGs ä¸å¡‘æ°¸çºŒ-æ·¨ç˜</title>
  <style>
    :root{
      --header-height:72px;
      --beach:#f7d69c;
      --sea:#5fc0e6;
      --sky:#cbefff;
      --text:#123;
      --accent:#2b9348;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans TC', 'Helvetica Neue', Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--sky) 0%, var(--sea) 35%, var(--beach) 50%);color:var(--text);overflow:hidden}
    header{position:fixed;left:0;top:0;right:0;height:var(--header-height);display:flex;align-items:center;justify-content:space-between;padding:12px 18px;box-sizing:border-box;z-index:1000}
    .brand{font-size:22px;font-weight:800}
    .hud{display:flex;gap:18px;align-items:center;font-weight:600}
    .hud .score, .hud .left{background:rgba(255,255,255,0.75);padding:8px 12px;border-radius:10px;backdrop-filter: blur(3px)}

    main{padding-top:calc(var(--header-height) + 8px);height:100%;box-sizing:border-box;}
    .play-area{position:relative;width:100%;height:calc(100% - var(--header-height));overflow:hidden}

    .sea-band{position:absolute;left:0;right:0;top:0;height:45%;pointer-events:none}
    .sand-band{position:absolute;left:0;right:0;bottom:0;height:55%;background:linear-gradient(180deg, rgba(255,255,255,0.04), transparent 10%, rgba(0,0,0,0.02));}

    .trash{position:absolute;touch-action:manipulation;cursor:pointer;user-select:none;display:flex;align-items:center;justify-content:center;font-size:20px;filter: drop-shadow(0 3px 6px rgba(0,0,0,0.25));}
    .size-xs{width:26px;height:26px;font-size:14px}
    .size-sm{width:36px;height:36px;font-size:18px}
    .size-md{width:54px;height:54px;font-size:26px}
    .size-lg{width:76px;height:76px;font-size:34px}
    .picked{transform:scale(0.2) rotate(20deg) !important;opacity:0;transition:transform 400ms ease,opacity 400ms ease}

    .modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:white;padding:26px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.3);z-index:2000;display:none;min-width:300px;text-align:center}
    .modal.show{display:block}
    .btn{display:inline-block;padding:10px 16px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:700;cursor:pointer}
    .btn.secondary{background:#2d89f0}

    /* è²“å’ªé›¨æ•ˆæœ */
    .cat{position:absolute;top:-80px;font-size:36px;animation:fall linear forwards;user-select:none;pointer-events:none;}
    @keyframes fall{0%{transform:translateY(0) rotate(0);}100%{transform:translateY(110vh) rotate(720deg);opacity:0;}}
  </style>
</head>
<body>
  <header>
    <div class="brand">SDGs ä¸å¡‘æ°¸çºŒ-æ·¨ç˜</div>
    <div class="hud">
      <div class="score">åˆ†æ•¸: <span id="score">0</span></div>
      <div class="left">å‰©é¤˜: <span id="left">50</span></div>
    </div>
  </header>

  <main>
    <div class="play-area" id="playArea">
      <div class="sea-band"></div>
      <div class="sand-band"></div>
    </div>
  </main>

  <div class="modal" id="modal">
    <h2 id="modalTitle">ä»»å‹™æˆåŠŸï¼</h2>
    <p id="modalText">ä½ å·²æ¸…ç†å®Œæ‰€æœ‰åƒåœ¾ï¼Œæ­å–œï¼</p>
    <div style="margin-top:14px">
      <button class="btn" id="nextBtn">å‰å¾€ä¸‹ä¸€é—œ</button>
      <button class="btn secondary" id="restartBtn" style="margin-left:10px">é‡æ–°é–‹å§‹</button>
    </div>
  </div>

  <script>
    const TOTAL = 50;
    const playArea = document.getElementById('playArea');
    const scoreEl = document.getElementById('score');
    const leftEl = document.getElementById('left');
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalText = document.getElementById('modalText');
    const nextBtn = document.getElementById('nextBtn');
    const restartBtn = document.getElementById('restartBtn');

    const TRASH_TYPES = [
      {name:'ä¿ç‰¹ç“¶', icon:'ğŸ¥¤', size:'size-sm', score:5},
      {name:'ç´™é¡', icon:'ğŸ“„', size:'size-xs', score:3},
      {name:'é¤ç›’', icon:'ğŸ±', size:'size-md', score:8},
      {name:'å¡‘è† è¢‹', icon:'ğŸ›ï¸', size:'size-sm', score:4},
      {name:'ä¿éº—é¾', icon:'ğŸ§Š', size:'size-lg', score:12},
      {name:'é£²æ–™æ¯', icon:'ğŸ¥›', size:'size-sm', score:5},
      {name:'æ¼‚æµåƒåœ¾', icon:'ğŸª£', size:'size-md', score:7},
      {name:'å…¶ä»–', icon:'âš“', size:'size-xs', score:2}
    ];

    let score = 0;
    let remaining = TOTAL;

    function rand(min,max){return Math.random()*(max-min)+min}

    function spawnTrash(){
      const rect = playArea.getBoundingClientRect();
      for(let i=0;i<TOTAL;i++){
        const t = TRASH_TYPES[Math.floor(Math.random()*TRASH_TYPES.length)];
        const el = document.createElement('div');
        el.className = `trash ${t.size}`;
        el.innerText = t.icon;
        el.title = `${t.name} +${t.score}åˆ†`;
        el.dataset.score = t.score;
        el.style.left = rand(10, rect.width-60)+'px';
        el.style.top = rand(rect.height*0.5, rect.height-60)+'px';
        el.style.transform = `rotate(${rand(-60,60)}deg)`;
        el.addEventListener('click',()=>{
          if(el.classList.contains('picked')) return;
          el.classList.add('picked');
          score += t.score; remaining -= 1;
          scoreEl.textContent = score; leftEl.textContent = remaining;
          setTimeout(()=>{el.remove(); if(remaining<=0) showModal();},400);
        });
        playArea.appendChild(el);
      }
    }

    function showModal(){
      modal.classList.add('show');
      modalText.textContent = `ä½ å·²æ¸…ç†å®Œæ‰€æœ‰åƒåœ¾ï¼Œç¸½åˆ†ï¼š${score}åˆ†`;
    }

    function restartGame(){
      score=0;remaining=TOTAL;scoreEl.textContent=0;leftEl.textContent=TOTAL;modal.classList.remove('show');
      document.querySelectorAll('.trash').forEach(t=>t.remove());
      spawnTrash();
    }

    nextBtn.onclick = restartGame;
    restartBtn.onclick = restartGame;
    window.onload = () => {
      spawnTrash();
      startCatRain();
    };

    /* è²“å’ªé›¨åŠŸèƒ½ */
    function startCatRain(){
      setInterval(()=>{
        const cat = document.createElement('div');
        cat.className = 'cat';
        cat.textContent = 'ğŸ±';
        cat.style.left = rand(0, window.innerWidth-40)+'px';
        cat.style.animationDuration = rand(4,8)+'s';
        document.body.appendChild(cat);
        cat.addEventListener('animationend', ()=>cat.remove());
      }, 300);
    }
  </script>
</body>
</html>
